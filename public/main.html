<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ - ã‚¢ãƒ—ãƒªä¸€è¦§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', 'Google Sans', Arial, sans-serif;
            background-color: #f8f9fa;
        }
        .google-shadow {
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
        }
        .list-item-hover:hover {
            background-color: #f1f3f4;
        }
        #account-menu.hidden {
            display: none;
        }
        /* ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .profile-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="h-16 flex items-center justify-between px-4 md:px-8 bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <div class="text-xl font-medium text-gray-700">App Directory</div>
        </div>

        <!-- å³å´ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="relative">
            <button id="account-avatar" class="w-10 h-10 rounded-full bg-gray-300 text-white flex items-center justify-center font-bold text-lg hover:ring-4 hover:ring-gray-100 transition-all overflow-hidden focus:outline-none">
                <img id="header-img" class="profile-img" alt="User Photo">
                <span id="avatar-letter"></span>
            </button>

            <!-- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç”¨ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
            <div id="account-menu" class="hidden absolute right-0 mt-2 w-72 bg-white rounded-2xl shadow-xl border border-gray-200 py-6 flex flex-col items-center z-50">
                <div id="menu-email" class="text-sm text-gray-500 mb-4 px-4 text-center truncate w-full">user@example.com</div>
                
                <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ã®å¤§ããªã‚¢ã‚¤ã‚³ãƒ³ -->
                <div class="w-20 h-20 rounded-full bg-gray-300 text-white flex items-center justify-center font-bold text-3xl mb-4 overflow-hidden">
                    <img id="menu-img" class="profile-img" alt="User Photo">
                    <span id="menu-avatar-letter"></span>
                </div>
                
                <div id="menu-name" class="text-lg font-medium text-gray-800 px-4 mb-4">ã“ã‚“ã«ã¡ã¯ï¼</div>
                
                <hr class="w-full border-gray-100 mb-4">
                
                <button id="logout-button-main" class="flex items-center justify-center gap-2 px-6 py-2 border border-gray-300 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors w-10/12">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                </button>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="flex-grow flex flex-col items-center p-4 md:p-8">
        <div class="w-full max-w-2xl bg-white rounded-xl border border-gray-200 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 bg-gray-50">
                <h1 class="text-gray-700 font-medium text-lg">åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«</h1>
            </div>

            <div id="link-list" class="divide-y divide-gray-100">
                <!-- ãƒ„ãƒ¼ãƒ«ãƒªã‚¹ãƒˆé …ç›® -->
                <a href="./tools/download.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center mr-4 group-hover:bg-blue-100">ğŸ“¥</div>
                    <div class="flex-grow text-gray-700 font-medium">Download</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/drawing.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-red-50 text-red-600 flex items-center justify-center mr-4 group-hover:bg-red-100">ğŸ¨</div>
                    <div class="flex-grow text-gray-700 font-medium">ãŠçµµæã</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/fablicdraw.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-green-50 text-green-600 flex items-center justify-center mr-4 group-hover:bg-green-100">ğŸ“</div>
                    <div class="flex-grow text-gray-700 font-medium">å›³å½¢æç”»</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/firechat.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-yellow-50 text-yellow-600 flex items-center justify-center mr-4 group-hover:bg-yellow-100">ğŸ’¬</div>
                    <div class="flex-grow text-gray-700 font-medium">ãƒãƒ£ãƒƒãƒˆ</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/firemovie.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-purple-50 text-purple-600 flex items-center justify-center mr-4 group-hover:bg-purple-100">ğŸ¬</div>
                    <div class="flex-grow text-gray-700 font-medium">Fireå‹•ç”»</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/imageview.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center mr-4 group-hover:bg-indigo-100">ğŸ–¼ï¸</div>
                    <div class="flex-grow text-gray-700 font-medium">ç”»åƒè¡¨ç¤º</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/ocr.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-pink-50 text-pink-600 flex items-center justify-center mr-4 group-hover:bg-pink-100">ğŸ”</div>
                    <div class="flex-grow text-gray-700 font-medium">æ–‡å­—èªè­˜</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/pdfmerge.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-orange-50 text-orange-600 flex items-center justify-center mr-4 group-hover:bg-orange-100">ğŸ“„</div>
                    <div class="flex-grow text-gray-700 font-medium">PDFçµåˆ</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/player.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center mr-4 group-hover:bg-blue-100">â–¶ï¸</div>
                    <div class="flex-grow text-gray-700 font-medium">å‹•ç”»å†ç”Ÿ</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/rotation.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-gray-50 text-gray-600 flex items-center justify-center mr-4 group-hover:bg-gray-100">ğŸ”„</div>
                    <div class="flex-grow text-gray-700 font-medium">ç”»åƒå›è»¢</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/logo.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-amber-50 text-amber-600 flex items-center justify-center mr-4 group-hover:bg-amber-100">ğŸ·ï¸</div>
                    <div class="flex-grow text-gray-700 font-medium">ãƒ­ã‚´ä½œæˆ</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/frame.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-teal-50 text-teal-600 flex items-center justify-center mr-4 group-hover:bg-teal-100">ğŸ”²</div>
                    <div class="flex-grow text-gray-700 font-medium">ãƒ•ãƒ¬ãƒ¼ãƒ ä½œæˆ</div>
                    <div class="text-gray-400">â¯</div>
                </a>
                <a href="./tools/terms.html" class="flex items-center p-4 md:p-5 list-item-hover transition-colors group">
                    <div class="w-10 h-10 rounded-lg bg-gray-50 text-gray-500 flex items-center justify-center mr-4 group-hover:bg-gray-100">âš–ï¸</div>
                    <div class="flex-grow text-gray-700 font-medium">åˆ©ç”¨è¦ç´„</div>
                    <div class="text-gray-400">â¯</div>
                </a>
            </div>
        </div>
        
        <p id="welcome-message" class="mt-8 text-sm text-gray-500 italic">ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ç¢ºèªã—ã¦ã„ã¾ã™...</p>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // Firebaseè¨­å®š
        const firebaseConfig = {
            apiKey: "AIzaSyCjsA2sYDk5pyXw_qmwSqDkK6jcijVwjhw",
            authDomain: "miclosoft.firebaseapp.com",
            projectId: "miclosoft",
            storageBucket: "miclosoft.firebasestorage.app",
            messagingSenderId: "647566802317",
            appId: "1:647566802317:web:9efd03242f25b76babd1c4"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // è¦ç´ ã®å–å¾—
        const welcomeMessage = document.getElementById('welcome-message');
        const logoutButtonMain = document.getElementById('logout-button-main');
        const accountAvatar = document.getElementById('account-avatar');
        const accountMenu = document.getElementById('account-menu');
        
        const headerImg = document.getElementById('header-img');
        const menuImg = document.getElementById('menu-img');
        const avatarLetter = document.getElementById('avatar-letter');
        const menuAvatarLetter = document.getElementById('menu-avatar-letter');
        
        const menuEmail = document.getElementById('menu-email');
        const menuName = document.getElementById('menu-name');

        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰
        accountAvatar.addEventListener('click', (e) => {
            e.stopPropagation();
            accountMenu.classList.toggle('hidden');
        });

        document.addEventListener('click', () => {
            accountMenu.classList.add('hidden');
        });

        // èªè¨¼ç›£è¦–
        onAuthStateChanged(auth, (user) => {
            if (user && user.emailVerified) {
                welcomeMessage.textContent = `ãƒ­ã‚°ã‚¤ãƒ³ä¸­: ${user.email}`;
                menuEmail.textContent = user.email;
                menuName.textContent = user.displayName ? `${user.displayName} ã•ã‚“` : "ã“ã‚“ã«ã¡ã¯ï¼";
                
                // ç”»åƒã®è¨­å®š
                if (user.photoURL) {
                    headerImg.src = user.photoURL;
                    menuImg.src = user.photoURL;
                    
                    // ç”»åƒã®èª­ã¿è¾¼ã¿ãŒæˆåŠŸã—ãŸã‚‰è¡¨ç¤º
                    headerImg.onload = () => {
                        headerImg.style.display = 'block';
                        avatarLetter.style.display = 'none';
                    };
                    menuImg.onload = () => {
                        menuImg.style.display = 'block';
                        menuAvatarLetter.style.display = 'none';
                    };
                } else {
                    // ç”»åƒãŒãªã„å ´åˆã¯é ­æ–‡å­—
                    const initial = (user.displayName || user.email).charAt(0).toUpperCase();
                    avatarLetter.textContent = initial;
                    menuAvatarLetter.textContent = initial;
                    headerImg.style.display = 'none';
                    menuImg.style.display = 'none';
                    avatarLetter.style.display = 'block';
                    menuAvatarLetter.style.display = 'block';
                }
            } else {
                if (user) signOut(auth);
                window.location.href = 'index.html';
            }
        });

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
        logoutButtonMain.addEventListener('click', async () => {
            try {
                await signOut(auth);
            } catch (error) {
                console.error('Logout Error:', error);
            }
        });
    </script>
</body>
</html>